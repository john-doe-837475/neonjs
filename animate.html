<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<title>Animation test</title>
<script type="text/javascript" src="SPARK.js"></script>
<script type="text/javascript">

SPARK.ready(function() {
	var betweens = [];
	var previous = 0;
	var el = SPARK.select('body').append({div:""}).setstyle('height', '20px').setstyle('width', '50px').setstyle('background', 'gray').setstyle('position', 'relative');
	SPARK.repeat(function(msec) {
		betweens.push(msec - previous);
		previous = msec;
		el.setstyle('left', (msec / 2.5) + "px");
		if (msec >= 3000) {
			for (var i = 0; i < betweens.length; i++) {
				SPARK.select('body').append({span:" "+betweens[i]}).setstyle('background', betweens[i] > 20 ? 'yellow' : 'white');
			}
			SPARK.select('body').append({p:"Period: "+(3000/(betweens.length-1))});
		}
		else return true;
	});
});

</script>
</head>

<body>
	<noscript><p>This page requires Javascript.</p></noscript>
</body>
</html>
